---
phase: 28-f401-unused-imports
plan: 02
type: execute
wave: 2
depends_on: ["28-01"]
files_modified:
  - pyproject.toml
autonomous: true
requirements: [CONF-01, F401-06]

must_haves:
  truths:
    - "examples/ directory is no longer excluded from ruff linting"
    - "F401 is no longer in the global ignore list"
    - "ruff check reports zero F401 violations across the entire codebase"
    - "ruff check on the full codebase still passes for all selected rules"
  artifacts:
    - path: "pyproject.toml"
      provides: "Ruff config without examples exclusion and without F401 in ignore list"
  key_links:
    - from: "pyproject.toml"
      to: "ruff check"
      via: "ruff configuration"
      pattern: "ignore.*=.*\\[.*\\]"
---

<objective>
Update pyproject.toml ruff configuration to remove the examples/ exclusion and remove F401 from the global ignore list.

Purpose: With all F401 violations fixed in Plan 01, the global suppression is no longer needed. Removing it ensures future unused imports are caught immediately. Removing the examples/ exclusion ensures all project code is linted.

Output: Updated pyproject.toml with stricter ruff config; full codebase passes ruff check.
</objective>

<execution_context>
@/home/esa/.claude/get-shit-done/workflows/execute-plan.md
@/home/esa/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/28-f401-unused-imports/28-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update pyproject.toml ruff config and verify full codebase</name>
  <files>pyproject.toml</files>
  <action>
Make two changes to the `[tool.ruff]` and `[tool.ruff.lint]` sections in pyproject.toml:

1. **Remove `exclude = ["examples"]`** — Delete the entire `exclude = ["examples"]` line from the `[tool.ruff]` section. This makes ruff lint all Python files including examples/.

2. **Remove `"F401"` from the `ignore` list** — In the `[tool.ruff.lint]` section, change:
   ```toml
   ignore = ["F401", "F841", "F541", "E402", "E741"]
   ```
   to:
   ```toml
   ignore = ["F841", "F541", "E402", "E741"]
   ```

After making these changes, verify:
- `ruff check src/ tests/ examples/` reports zero F401 violations
- `ruff check .` does not introduce unexpected violations from other rules in examples/
- The full test suite still passes

If `ruff check .` reveals new non-F401 violations in examples/ (from rules like F841, E501, E402 that were previously hidden by the exclusion), that is expected and will be handled in later phases (29-33). Only F401 must be zero.
  </action>
  <verify>
    <automated>cd /home/esa/git/rsf-python && ruff check --select F401 . 2>&1 | grep "^F401" | wc -l</automated>
    Expected output: 0

    Additional verification:
    - `grep -c 'exclude' pyproject.toml` in the ruff section should show the line is gone
    - `grep 'F401' pyproject.toml` should return nothing (F401 no longer in ignore list)
    - `.venv/bin/python -m pytest tests/ -x -q` passes
  </verify>
  <done>pyproject.toml no longer excludes examples/ from ruff. F401 is removed from the ignore list. ruff check --select F401 . reports zero violations. Test suite passes.</done>
</task>

</tasks>

<verification>
1. `grep 'exclude' pyproject.toml` does NOT match in the ruff section (examples/ exclusion removed)
2. `grep 'F401' pyproject.toml` returns no matches (F401 removed from ignore list)
3. `ruff check --select F401 .` exits cleanly with zero violations
4. `.venv/bin/python -m pytest tests/ -x -q` passes (308+ tests)
</verification>

<success_criteria>
- pyproject.toml [tool.ruff] section has no `exclude` line
- pyproject.toml [tool.ruff.lint] `ignore` list does not contain "F401"
- Zero F401 violations across the entire codebase
- All existing tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/28-f401-unused-imports/28-02-SUMMARY.md`
</output>
